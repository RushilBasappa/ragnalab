---
- name: RagnaLab Bootstrap
  hosts: ragnalab
  become: false
  vars_files:
    - vars/main.yml

  tasks:
    # Bootstrap
    - name: System update
      ansible.builtin.import_tasks: tasks/bootstrap/system-update.yml
      tags: [system-update]

    - name: GitHub SSH setup
      ansible.builtin.import_tasks: tasks/bootstrap/github-ssh.yml
      tags: [github-ssh]

    - name: Tailscale VPN
      ansible.builtin.import_tasks: tasks/bootstrap/tailscale.yml
      tags: [tailscale]

    - name: Docker
      ansible.builtin.import_tasks: tasks/bootstrap/docker.yml
      tags: [docker]

    - name: Zsh + Starship
      ansible.builtin.import_tasks: tasks/bootstrap/zsh.yml
      tags: [zsh]

    # Services
    - name: Socket Proxy
      ansible.builtin.import_tasks: tasks/services/socket-proxy.yml
      tags: [socket-proxy]

    - name: Authelia
      ansible.builtin.import_tasks: tasks/services/authelia.yml
      tags: [authelia]

    - name: Traefik
      ansible.builtin.import_tasks: tasks/services/traefik.yml
      tags: [traefik]

    - name: Pi-hole
      ansible.builtin.import_tasks: tasks/services/pihole.yml
      tags: [pihole]

    # Apps
    - name: RustDesk
      ansible.builtin.import_tasks: tasks/apps/rustdesk.yml
      tags: [rustdesk]

    - name: Homepage
      ansible.builtin.import_tasks: tasks/apps/homepage.yml
      tags: [homepage]

    - name: Uptime Kuma
      ansible.builtin.import_tasks: tasks/apps/uptime-kuma.yml
      tags: [uptime-kuma]

    - name: Vaultwarden
      ansible.builtin.import_tasks: tasks/apps/vaultwarden.yml
      tags: [vaultwarden]

    - name: Paperless-ngx
      ansible.builtin.import_tasks: tasks/apps/paperless-ngx.yml
      tags: [paperless-ngx]

    - name: Ntfy
      ansible.builtin.import_tasks: tasks/apps/ntfy.yml
      tags: [ntfy]

    - name: Tandoor Recipes
      ansible.builtin.import_tasks: tasks/apps/tandoor.yml
      tags: [tandoor]

    - name: Dozzle
      ansible.builtin.import_tasks: tasks/apps/dozzle.yml
      tags: [dozzle]

    - name: Watchtower
      ansible.builtin.import_tasks: tasks/apps/watchtower.yml
      tags: [watchtower]

    # Media
    - name: qBittorrent + Gluetun
      ansible.builtin.import_tasks: tasks/apps/qbittorrent.yml
      tags: [qbittorrent]

    - name: Sonarr
      ansible.builtin.import_tasks: tasks/apps/sonarr.yml
      tags: [sonarr]

    - name: Radarr
      ansible.builtin.import_tasks: tasks/apps/radarr.yml
      tags: [radarr]

    - name: Prowlarr
      ansible.builtin.import_tasks: tasks/apps/prowlarr.yml
      tags: [prowlarr]

    - name: Bazarr
      ansible.builtin.import_tasks: tasks/apps/bazarr.yml
      tags: [bazarr]

    - name: Jellyfin
      ansible.builtin.import_tasks: tasks/apps/jellyfin.yml
      tags: [jellyfin]

    - name: Jellyseerr
      ansible.builtin.import_tasks: tasks/apps/jellyseerr.yml
      tags: [jellyseerr]

    # New Apps
    - name: FreshRSS
      ansible.builtin.import_tasks: tasks/apps/freshrss.yml
      tags: [freshrss]

    - name: Actual Budget
      ansible.builtin.import_tasks: tasks/apps/actual-budget.yml
      tags: [actual-budget]

    - name: Obsidian LiveSync
      ansible.builtin.import_tasks: tasks/apps/obsidian-livesync.yml
      tags: [obsidian-livesync]

    - name: Syncthing
      ansible.builtin.import_tasks: tasks/apps/syncthing.yml
      tags: [syncthing]

    - name: FileBrowser
      ansible.builtin.import_tasks: tasks/apps/filebrowser.yml
      tags: [filebrowser]

    - name: Backrest
      ansible.builtin.import_tasks: tasks/apps/backrest.yml
      tags: [backrest]

    - name: Beszel
      ansible.builtin.import_tasks: tasks/apps/beszel.yml
      tags: [beszel]

    - name: Home Assistant
      ansible.builtin.import_tasks: tasks/apps/homeassistant.yml
      tags: [homeassistant]

    - name: Speedtest Tracker
      ansible.builtin.import_tasks: tasks/apps/speedtest-tracker.yml
      tags: [speedtest-tracker]
