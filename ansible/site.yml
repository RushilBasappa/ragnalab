---
- name: RagnaLab Bootstrap
  hosts: ragnalab
  become: false
  vars_files:
    - vars/main.yml

  tasks:
    # Bootstrap
    - name: System update
      ansible.builtin.import_tasks: tasks/bootstrap/system-update.yml
      tags: [system-update]

    - name: GitHub SSH setup
      ansible.builtin.import_tasks: tasks/bootstrap/github-ssh.yml
      tags: [github-ssh]

    - name: Tailscale VPN
      ansible.builtin.import_tasks: tasks/bootstrap/tailscale.yml
      tags: [tailscale]

    - name: Docker
      ansible.builtin.import_tasks: tasks/bootstrap/docker.yml
      tags: [docker]

    - name: Zsh + Starship
      ansible.builtin.import_tasks: tasks/bootstrap/zsh.yml
      tags: [zsh]

    # Services
    - name: Socket Proxy
      ansible.builtin.import_tasks: tasks/services/socket-proxy.yml
      tags: [socket-proxy]

    - name: Authelia
      ansible.builtin.import_tasks: tasks/services/authelia.yml
      tags: [authelia]

    - name: Traefik
      ansible.builtin.import_tasks: tasks/services/traefik.yml
      tags: [traefik]

    - name: Pi-hole
      ansible.builtin.import_tasks: tasks/services/pihole.yml
      tags: [pihole]

    # Apps
    - name: RustDesk
      ansible.builtin.import_tasks: tasks/apps/rustdesk.yml
      tags: [rustdesk]

    - name: Homepage
      ansible.builtin.import_tasks: tasks/apps/homepage.yml
      tags: [homepage]

    - name: Uptime Kuma
      ansible.builtin.import_tasks: tasks/apps/uptime-kuma.yml
      tags: [uptime-kuma]
