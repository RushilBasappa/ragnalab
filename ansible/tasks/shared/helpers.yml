---
# Shared Helper Functions - Dispatcher
#
# Usage: include_tasks with 'helper' parameter
#
# This dispatcher includes only the specific helper requested, eliminating
# noisy skip messages in Ansible logs. Each helper is now a separate file.
#
# General Actions:
#   create-volumes      - Create one or more Docker volumes
#   create-subpaths     - Create subdirectories inside a volume (for volume.subpath)
#   start               - Start container(s) with docker_compose_v2
#   stop                - Stop container(s)
#   restart             - Restart container(s)
#   wait-ready          - Wait for container to respond to curl healthcheck
#   get-volume-path     - Get volume mountpoint, sets _volume_path fact
#   wait-for-file       - Wait for file to exist on disk
#
# *arr Actions:
#   extract-apikey      - Start *arr container, wait, extract API key from config.xml
#   read-apikey         - Read API key from already-running *arr app's config volume
#   patch-auth          - Stop *arr, patch XML auth to External, start, wait
#   add-root-folder     - Check and add root folder if missing
#   add-download-client - Check and add qBittorrent download client if missing
#   add-jellyfin-notify - Check and add Jellyfin notification connection if missing
#   add-indexer-proxy   - Check and add FlareSolverr indexer proxy to Prowlarr
#   configure-quality   - Run quality profile Python script
#
# Jellyfin Actions:
#   create-jellyfin-apikey - Create or retrieve a named Jellyfin API key (idempotent)

- name: "Dispatch helper: {{ helper }}"
  ansible.builtin.include_tasks: "helpers/{{ helper }}.yml"
